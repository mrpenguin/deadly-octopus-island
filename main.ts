namespace myTiles {
    //% blockIdentity=images._tile
    export const tile0 = img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `
    //% blockIdentity=images._tile
    export const tile2 = img`
        b b b b b b b b
        e e e b b b b b
        b b b b b b b b
        b b b b b e e e
        b b b b b b b b
        b b e e e e e b
        b b b b b b b b
        b e e b b b e b
    `
    //% blockIdentity=images._tile
    export const tile3 = img`
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile4 = img`
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
        7 7 7 7 7 7 7 7
    `
    //% blockIdentity=images._tile
    export const tile5 = img`
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
    `
    //% blockIdentity=images._tile
    export const tile6 = img`
        7 5 5 5 5 5 5 7
        5 7 7 7 7 7 7 5
        5 7 7 7 7 7 7 5
        5 7 7 7 7 7 7 5
        5 7 7 7 7 7 7 5
        5 7 7 7 7 7 7 5
        5 7 7 7 7 7 7 5
        7 5 5 5 5 5 5 7
    `
    //% blockIdentity=images._tile
    export const tile7 = img`
        b b b b b b b b
        e e e e e e e e
        d d d d d d d d
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile8 = img`
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        d d d d d d d d
        e e e e e e e e
        b b b b b b b b
    `
    //% blockIdentity=images._tile
    export const tile9 = img`
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d d d d d d
        b e e e e e e e
        b b b b b b b b
    `
    //% blockIdentity=images._tile
    export const tile10 = img`
        b b b b b b b b
        e e e e e e e b
        d d d d d d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
    `
    //% blockIdentity=images._tile
    export const tile11 = img`
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        8 8 8 8 8 d e b
        d d d d d d e b
        e e e e e e e b
        b b b b b b b b
    `
    //% blockIdentity=images._tile
    export const tile12 = img`
        b b b b b b b b
        b e e e e e e e
        b e d d d d d d
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
        b e d 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile13 = img`
        8 8 8 8 8 d e b
        8 8 8 8 8 d e e
        8 8 8 8 8 d d d
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile14 = img`
        b e d 8 8 8 8 8
        e e d 8 8 8 8 8
        d d d 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile15 = img`
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        d d d 8 8 8 8 8
        e e d 8 8 8 8 8
        b e d 8 8 8 8 8
    `
    //% blockIdentity=images._tile
    export const tile16 = img`
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 8 8 8
        8 8 8 8 8 d d d
        8 8 8 8 8 d e e
        8 8 8 8 8 d e b
    `
    //% blockIdentity=images._tile
    export const tile17 = img`
        b b b b b b b b
        b b 3 3 3 b b b
        b b 3 b b 3 b b
        b b 3 b b 3 b b
        b b 3 3 3 b b b
        b b 3 b b b b b
        b b 3 b b b b b
        b b b b b b b b
    `
    //% blockIdentity=images._tile
    export const tile18 = img`
        d b b b b b b d
        b d b b b b d b
        b b d b b d b b
        b b b d d b b b
        b b b d d b b b
        b b d b b d b b
        b d b b b b d b
        d b b b b b b d
    `
    //% blockIdentity=images._tile
    export const tile19 = img`
        b b b b b b b b
        b b 2 2 2 b b b
        b 2 b b b 2 b b
        b 2 b b b b b b
        b b 2 2 2 b b b
        b b b b b 2 b b
        b 2 b b b 2 b b
        b b 2 2 2 b b b
    `
    //% blockIdentity=images._tile
    export const tile20 = img`
        4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4
        5 5 5 5 5 5 5 5
        4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4
        5 5 5 5 5 5 5 5
        4 4 4 4 4 4 4 4
        4 4 4 4 4 4 4 4
    `
    //% blockIdentity=images._tile
    export const tile21 = img`
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
        4 4 5 4 4 5 4 4
    `
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    info.setScore(info.score() + 1)
    otherSprite.destroy()
})
let lastY:number = 0
let lastX:number = 0
let lastTile:Image = null
let mySprite = sprites.create(img`
    . . . . . . . .
    . . . 1 1 . . .
    . . 1 1 1 1 . .
    3 4 1 1 1 1 4 3
    3 4 4 1 1 4 4 3
    . . 4 1 1 4 . .
    . . 1 1 1 1 . .
    . . . . . . . .
`, SpriteKind.Player)
let octopus = sprites.create(img`
    . d d d d . . . . . . . d d d d d d . . . . . . . . . d d d . .
    d d d . . . . . . . . d d d d d d d d d . . . . . d d d d d d .
    d d . . . . . . . . d d d d . . . . . d d . . . . d d . . . d d
    d d . . . . . . . . d d d . . . . . . . . . . . d d d . . . d d
    d d . d . . . . . . d d d . . . . . . . . . . d d d d . . . . d
    d d d . . . . . . . d d d d . . . . . . . . d d d d d . . . . .
    d d d d . . . . . . d d d 8 8 8 8 8 d d . . d d d d . . . . . .
    . d d d d . . . . . . 8 8 d d d d d d d d d d d d . . . . . . .
    . . d d d d d d d . 8 d d d d d d d d d d d d d d . . . . . . .
    . . . d d d d d d 8 d d d d d d d d d d d d d d . . . . . . . .
    . . . . . d d d d 8 d d d d d d d d d d d d d d . . . . . d d .
    . . . . . . d d 8 d d d d d d d d d d d d d d d d . d d d d d d
    . . . . . . . . 8 d d d d d d d d d d d d d d d d d d d d d d d
    . . . . . . . . d d d d d d d d d d d d d d d d d d d d d . d d
    . . . . . . . . d d d d d d d d d d d d d d d d d d d . . . d d
    . . . . . . . . d d d d d d d d d d d d d d d d d . . . . . . d
    . . . . . . . d d d d d d d d d d d d d d d d d 1 . . . . d d d
    . . . . . . d d d d d d d d d d d d d d d d d d 1 . . . . d d .
    . . . . d d d d d d d d d d d d d d d d d d d 1 d . . . . d . .
    . . d d d d d d d d d d d d d d d d d d d d d 1 d d d . . . . .
    . d d d d d d d d d d d d d d d d d d d d d d d d d d . . . . .
    d d d d d . . . . . d d d d d d d d d d 1 1 . d d d d d . . . .
    d d d d . . . . . d d d d d d d d 1 1 1 d d . . . d d d d . . .
    d d d . . . . . . d d d d d . . . d d d d d . . . d d d d . . .
    d d d . . . . . . d d d . . . . . . d d d d . . . . . d d d . .
    d d d . . . . . . d d d . . . . . . . d d d d . . . . d d d . .
    d d d . . . . . d d d . . . . . . . . . d d d . . . . d d d d .
    d d . . . . . . d d d . . . . . . . . . d d d . . . . . d d d .
    d d . . . . . . d d d . . . . . . . . . . d d d . . . . . d d d
    d d . . . . . . d d d . . . . . . . . d . . d d . . . . . . d d
    d d d . . . . . . d d . . . . . . . . d d d d d . . . . . . d d
    . d d . . . . . . . d d d . . . . . . . d d d . . . . . . d . .
`, SpriteKind.Enemy)
let shark = sprites.create(img`
    . . . . 8 d d .
    . . . 8 d d . .
    . . 8 d 1 . . .
    . 8 d d 1 . . .
    . 8 d d d 1 . .
    . d d d d d 1 .
    7 d d d d d d 7
    . 7 7 7 7 7 7 .
`, SpriteKind.Enemy)
let coin = sprites.create(img`
    . . 4 4 4 4 . .
    . 4 5 5 5 5 4 .
    4 5 5 4 5 5 5 4
    4 5 5 4 5 5 5 4
    4 5 5 4 5 5 5 4
    4 5 5 4 5 5 5 4
    . 4 5 5 5 5 4 .
    . . 4 4 4 4 . .
`, SpriteKind.Food)
controller.moveSprite(mySprite)
scene.cameraFollowSprite(mySprite)
tiles.setTilemap(tiles.createTilemap(
            hex`2000200001010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010110010101010101010101010101010101010101010101010101110101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101011313010101010101010101010101010101010101010101010101010101010102030303030303030303030303030314010101010101010101010101010101010203030303030303030303030303031401010101010101010101010101010101020503040101010101010101010101010101010101010101010101010101010102030304011201010101010101010101010101010101010101010101010101010203050401010101010101010101010101010101010101010101010101010101020303040101010101010101010101010101010101010101010101010101010102050304010101010101010101010101010101010101010101010101010101010203030401010101010101010101010101010101010101010101010101010101020305040101010101010101010101010101010101010101010101010101010102030304010101010101010101010101010101010101010101010101010101010205030401010101010101010101010101010101010101010101010101010101020303040101010101010101010101010101010101010101010101010101010102030504010101010101010101010101010101010101010101010101010101010203030401010101010101010101010101010101010101010101010101010101020503040101010101010101010101010101010101010101010101010101010101131301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101`,
            img`
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
            `,
            [myTiles.tile0,myTiles.tile2,myTiles.tile3,myTiles.tile4,myTiles.tile5,myTiles.tile6,myTiles.tile7,myTiles.tile8,myTiles.tile9,myTiles.tile10,myTiles.tile11,myTiles.tile12,myTiles.tile13,myTiles.tile14,myTiles.tile15,myTiles.tile16,myTiles.tile17,myTiles.tile18,myTiles.tile19,myTiles.tile20,myTiles.tile21],
            TileScale.Eight
        ))
let coinTiles = tiles.getTilesByType(myTiles.tile6)
coinTiles.forEach(function (value: tiles.Location, index: number) {
    let newCoin = sprites.create(coin.image, SpriteKind.Food)
    tiles.placeOnTile(newCoin, value)
    tiles.setTileAt(value, myTiles.tile4);
})
let playerSpawnTile = tiles.getTilesByType(myTiles.tile17)[0]
let octopusSpanwTile = tiles.getTilesByType(myTiles.tile18)[0]
let sharkSpawnTile = tiles.getTilesByType(myTiles.tile19)[0]
function positionToTile(position:number):number{
    return Math.floor(position/8);
}
game.onUpdate(function () {
    let newTile:Image = tiles.getTileAt(positionToTile(mySprite.x), positionToTile(mySprite.y))
    if (lastTile == null) {
        lastTile = newTile
    }
    if (newTile != lastTile) {
        mySprite.x = lastX
        mySprite.y = lastY
        console.log("changed tile")
        return;
    }
    lastX = mySprite.x
    lastY = mySprite.y
    lastTile = newTile
})
